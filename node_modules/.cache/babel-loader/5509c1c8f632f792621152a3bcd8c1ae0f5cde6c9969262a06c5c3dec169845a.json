{"ast":null,"code":"import { createSlice } from \"@reduxjs/toolkit\";\nimport { setlogin, setlogout, createUser } from \"./actions\";\nimport { getCookie, removeCookie, setCookie } from \"../../utils/cookie\";\nconst PREFIX = \"auth\";\nlet initLoginUser;\nif (getCookie(\"username\") && getCookie(\"username\") !== \"undefined\") {\n  initLoginUser = getCookie(\"username\");\n} else {\n  initLoginUser = \"\";\n}\nconst initialState = {\n  username: initLoginUser,\n  status: false,\n  errorAuth: \"\",\n  updateResponse: false\n};\nconst setAuth = (state, res) => {\n  if (res.success) {\n    state.status = res.success;\n    state.errorAuth = \"\";\n    setCookie(\"username\", res.data.username);\n    setCookie(\"token\", res.data.token);\n    state.username = res.data.username;\n  } else {\n    state.status = res.success;\n    state.errorAuth = res.error;\n  }\n  state.updateResponse = !state.updateResponse;\n};\nconst setCreateUser = (state, res) => {\n  if (res.success) {\n    state.status = res.success;\n    state.errorAuth = \"\";\n  } else {\n    state.status = res.success;\n    state.errorAuth = res.error;\n  }\n  state.updateResponse = !state.updateResponse;\n};\nexport const authReducer = createSlice({\n  name: PREFIX,\n  initialState,\n  reducers: {\n    logout: state => {\n      removeCookie(\"username\");\n      removeCookie(\"token\");\n      state.username = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(setlogin.fulfilled.type, (state, action) => {\n      setAuth(state, action.payload);\n    });\n    builder.addCase(setlogout.fulfilled.type, state => {\n      removeCookie(\"username\");\n      removeCookie(\"token\");\n      state.username = \"\";\n    });\n    builder.addCase(createUser.fulfilled.type, (state, action) => {\n      setCreateUser(state, action.payload);\n    });\n  }\n});\nexport const {\n  logout\n} = authReducer.actions;\nexport { setlogin, setlogout, createUser };\nexport default authReducer.reducer;","map":{"version":3,"names":["createSlice","setlogin","setlogout","createUser","getCookie","removeCookie","setCookie","PREFIX","initLoginUser","initialState","username","status","errorAuth","updateResponse","setAuth","state","res","success","data","token","error","setCreateUser","authReducer","name","reducers","logout","extraReducers","builder","addCase","fulfilled","type","action","payload","actions","reducer"],"sources":["/home/dev/Dev/Web3/take-home-challenge/src/store/auth/index.ts"],"sourcesContent":["import { createSlice, PayloadAction } from \"@reduxjs/toolkit\";\nimport { setlogin, setlogout, createUser } from \"./actions\";\nimport { getCookie, removeCookie, setCookie } from \"../../utils/cookie\";\n\nconst PREFIX = \"auth\";\n\nlet initLoginUser;\nif (getCookie(\"username\") && getCookie(\"username\") !== \"undefined\") {\n  initLoginUser = getCookie(\"username\");\n} else {\n  initLoginUser = \"\";\n}\n\nconst initialState: any = {\n  username: initLoginUser,\n  status: false,\n  errorAuth: \"\",\n  updateResponse: false\n};\n\nconst setAuth = (state: any, res: any) => {\n  if (res.success) {\n    state.status = res.success;\n    state.errorAuth = \"\";\n    setCookie(\"username\", res.data.username);\n    setCookie(\"token\", res.data.token);\n    state.username = res.data.username;\n  } else {\n    state.status = res.success;\n    state.errorAuth = res.error;\n  }\n  state.updateResponse = !state.updateResponse;\n};\n\nconst setCreateUser = (state: any, res: any) => {\n  if (res.success) {\n    state.status = res.success;\n    state.errorAuth = \"\";\n  } else {\n    state.status = res.success;\n    state.errorAuth = res.error;\n  }\n  state.updateResponse = !state.updateResponse;\n};\n\nexport const authReducer = createSlice({\n  name: PREFIX,\n  initialState,\n  reducers: {\n    logout: state => {\n      removeCookie(\"username\");\n      removeCookie(\"token\");\n      state.username = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(\n      setlogin.fulfilled.type,\n      (state: any, action: PayloadAction<any>) => {\n        setAuth(state, action.payload);\n      }\n    );\n    builder.addCase(setlogout.fulfilled.type, (state: any) => {\n      removeCookie(\"username\");\n      removeCookie(\"token\");\n      state.username = \"\";\n    });\n    builder.addCase(\n      createUser.fulfilled.type,\n      (state: any, action: PayloadAction<any>) => {\n        setCreateUser(state, action.payload);\n      }\n    );\n  }\n});\nexport const { logout } = authReducer.actions;\nexport { setlogin, setlogout, createUser };\nexport default authReducer.reducer;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}